{"ast":null,"code":"var _jsxFileName = \"/app/frontend/src/components/NewIssueForm.jsx\";\nimport React, { useEffect } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Input from \"@material-ui/core/Input\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Select from \"@material-ui/core/Select\";\nimport Chip from \"@material-ui/core/Chip\";\nimport { Editor } from \"@tinymce/tinymce-react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\nimport axios from \"axios\";\nimport * as api_links from \"../APILinks\";\n\nconst NewIssueForm = props => {\n  const [tags, setTags] = React.useState([]);\n  const [tagsID, setTagsID] = React.useState([]);\n  const [formData, setFormData] = React.useState({\n    title: \"\"\n  });\n  const [issueImage, setIssueImage] = React.useState(null);\n  const [issueDescription, setIssueDescription] = React.useState(\"\");\n\n  async function fetchTagListFromAPI() {\n    axios.get(api_links.API_ROOT + \"tags/\").then(res => {\n      setTags(res.data);\n    }).catch(err => console.log(err));\n  }\n\n  const handleTagsChange = event => {\n    setTagsID(event.target.value);\n  };\n\n  const handleFormChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setFormData(prevValue => ({ ...prevValue,\n      [name]: value\n    }));\n  };\n\n  const handleImageChange = event => {\n    setIssueImage(event.target.files[0]);\n  };\n\n  const handleFormSubmit = event => {\n    event.preventDefault();\n    let data = {\n      title: formData.title,\n      description: issueDescription,\n      timestamp: new Date(),\n      project: props.project,\n      tags: tagsID\n    };\n    axios.post(api_links.API_ROOT + \"issues/\", data).then(res => {\n      let audio = new Audio(\"../sounds/navigation_selection-complete-celebration.wav\");\n      audio.play();\n      setTimeout(() => {\n        if (issueImage !== null && res.status == 201) {\n          let issue_id = res.data.id;\n          data = new FormData();\n          data.append(\"issue\", issue_id);\n          data.append(\"image\", issueImage, issueImage.name);\n          axios.post(api_links.API_ROOT + \"issueimages/\", data).then(res => console.log(res)).catch(err => {\n            console.log(err);\n            let audio = new Audio(\"../sounds/alert_error-03.wav\");\n            audio.play();\n          });\n        }\n\n        props.getIssues();\n        props.handleClose();\n      }, 1000);\n    }).catch(err => {\n      console.log(err);\n      let audio = new Audio(\"../sounds/alert_error-03.wav\");\n      audio.play();\n    });\n  };\n\n  React.useEffect(() => {\n    fetchTagListFromAPI();\n  }, []);\n\n  const handleEditorChange = (content, editor) => {\n    setIssueDescription(content);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      margin: \"20px 5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    noValidate: true,\n    onSubmit: handleFormSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Typography, {\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 15\n    }\n  }, \"Title\"), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    className: \"custom-form-outline\",\n    style: props.borderClass,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    name: \"title\",\n    fullWidth: true,\n    id: \"issuetitle\",\n    onChange: handleFormChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  }, \"Description\"), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    style: { ...props.borderClass,\n      padding: \"0\",\n      borderRadius: \"4px\",\n      margin: \"10px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, !props.darkTheme ? /*#__PURE__*/React.createElement(Editor, {\n    value: issueDescription,\n    init: {\n      skin: \"material-classic\",\n      content_css: \"material-classic\",\n      icons: \"thin\",\n      height: 250,\n      menubar: false,\n      plugins: [\"advlist autolink lists link image charmap print preview anchor\", \"searchreplace visualblocks code fullscreen\", \"insertdatetime media table paste code help wordcount table\"],\n      toolbar: [\"undo redo | formatselect | bold italic backcolor | \\\n                            alignleft aligncenter alignright alignjustify | \\\n                            bullist numlist outdent indent | removeformat | table | code | help\"]\n    },\n    onEditorChange: handleEditorChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 19\n    }\n  }) : /*#__PURE__*/React.createElement(Editor, {\n    value: issueDescription,\n    init: {\n      skin: \"oxide-dark\",\n      content_css: \"dark\",\n      icons: \"thin\",\n      height: 250,\n      menubar: false,\n      plugins: [\"advlist autolink lists link image charmap print preview anchor\", \"searchreplace visualblocks code fullscreen\", \"insertdatetime media table paste code help wordcount table\"],\n      toolbar: [\"undo redo | formatselect | bold italic backcolor | \\\n                            alignleft aligncenter alignright alignjustify | \\\n                            bullist numlist outdent indent | removeformat | table | code | help\"]\n    },\n    onEditorChange: handleEditorChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 15\n    }\n  }, \"Image\"), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    className: \"custom-form-outline\",\n    style: props.borderClass,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"image\",\n    accept: \"image/*\",\n    onChange: handleImageChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    className: \"form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, \"Tags\"), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Select, {\n    className: \"custom-form-outline-padding-none\",\n    labelId: \"mutiple-chip-label\",\n    id: \"mutiple-chip\",\n    className: \"custom-form-selection-outline\",\n    style: props.borderClass,\n    multiple: true,\n    value: tagsID,\n    onChange: handleTagsChange,\n    input: /*#__PURE__*/React.createElement(Input, {\n      id: \"select-multiple-chip\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 26\n      }\n    }),\n    renderValue: selected => {\n      let o = {};\n      tags.map(obj => {\n        o[obj.id] = obj.tag_text;\n      });\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 23\n        }\n      }, selected.map(value => /*#__PURE__*/React.createElement(Chip, {\n        label: o[value],\n        key: value,\n        style: {\n          margin: \"5px\",\n          borderRadius: \"10px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 27\n        }\n      })));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 17\n    }\n  }, tags.map(tag => /*#__PURE__*/React.createElement(MenuItem, {\n    key: tag.tag_text,\n    value: tag.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: tag.color,\n      fontWeight: \"900\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"issue-tag-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 25\n    }\n  }, \"#\" + tag.tag_text)))))), /*#__PURE__*/React.createElement(Button, {\n    type: \"submit\",\n    fullWidth: true,\n    variant: \"contained\",\n    color: \"secondary\",\n    style: {\n      marginTop: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 15\n    }\n  }, \"Add Issue\"))))));\n};\n\nconst mapStateToProps = state => {\n  return {\n    darkTheme: [\"dark\", \"solarizedDark\", \"palpatine\"].includes(state.theme.theme),\n    borderClass: [\"dark\", \"solarizedDark\", \"palpatine\"].includes(state.theme.theme) ? {\n      border: \"1px solid #ffffff6e\"\n    } : {\n      border: \"1.5px solid #00000042\"\n    }\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, null)(NewIssueForm));","map":{"version":3,"sources":["/app/frontend/src/components/NewIssueForm.jsx"],"names":["React","useEffect","Button","TextField","Grid","Typography","Container","Input","MenuItem","Select","Chip","Editor","connect","withRouter","axios","api_links","NewIssueForm","props","tags","setTags","useState","tagsID","setTagsID","formData","setFormData","title","issueImage","setIssueImage","issueDescription","setIssueDescription","fetchTagListFromAPI","get","API_ROOT","then","res","data","catch","err","console","log","handleTagsChange","event","target","value","handleFormChange","name","prevValue","handleImageChange","files","handleFormSubmit","preventDefault","description","timestamp","Date","project","post","audio","Audio","play","setTimeout","status","issue_id","id","FormData","append","getIssues","handleClose","handleEditorChange","content","editor","margin","borderClass","padding","borderRadius","darkTheme","skin","content_css","icons","height","menubar","plugins","toolbar","selected","o","map","obj","tag_text","tag","color","fontWeight","marginTop","mapStateToProps","state","includes","theme","border"],"mappings":"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","sourcesContent":["import React, { useEffect } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport Input from \"@material-ui/core/Input\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport Select from \"@material-ui/core/Select\";\nimport Chip from \"@material-ui/core/Chip\";\nimport { Editor } from \"@tinymce/tinymce-react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"react-router-dom\";\n\nimport axios from \"axios\";\nimport * as api_links from \"../APILinks\";\n\nconst NewIssueForm = (props) => {\n  const [tags, setTags] = React.useState([]);\n  const [tagsID, setTagsID] = React.useState([]);\n  const [formData, setFormData] = React.useState({\n    title: \"\",\n  });\n  const [issueImage, setIssueImage] = React.useState(null);\n  const [issueDescription, setIssueDescription] = React.useState(\"\");\n\n  async function fetchTagListFromAPI() {\n    axios\n      .get(api_links.API_ROOT + \"tags/\")\n      .then((res) => {\n        setTags(res.data);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  const handleTagsChange = (event) => {\n    setTagsID(event.target.value);\n  };\n\n  const handleFormChange = (event) => {\n    const { name, value } = event.target;\n    setFormData((prevValue) => ({\n      ...prevValue,\n      [name]: value,\n    }));\n  };\n\n  const handleImageChange = (event) => {\n    setIssueImage(event.target.files[0]);\n  };\n\n  const handleFormSubmit = (event) => {\n    event.preventDefault();\n    let data = {\n      title: formData.title,\n      description: issueDescription,\n      timestamp: new Date(),\n      project: props.project,\n      tags: tagsID,\n    };\n\n    axios\n      .post(api_links.API_ROOT + \"issues/\", data)\n      .then((res) => {\n        let audio = new Audio(\n          \"../sounds/navigation_selection-complete-celebration.wav\"\n        );\n        audio.play();\n        setTimeout(() => {\n          if (issueImage !== null && res.status == 201) {\n            let issue_id = res.data.id;\n            data = new FormData();\n            data.append(\"issue\", issue_id);\n            data.append(\"image\", issueImage, issueImage.name);\n            axios\n              .post(api_links.API_ROOT + \"issueimages/\", data)\n              .then((res) => console.log(res))\n              .catch((err) => {\n                console.log(err);\n                let audio = new Audio(\"../sounds/alert_error-03.wav\");\n                audio.play();\n              });\n          }\n          props.getIssues();\n          props.handleClose();\n        }, 1000);\n      })\n      .catch((err) => {\n        console.log(err);\n        let audio = new Audio(\"../sounds/alert_error-03.wav\");\n        audio.play();\n      });\n  };\n\n  React.useEffect(() => {\n    fetchTagListFromAPI();\n  }, []);\n\n  const handleEditorChange = (content, editor) => {\n    setIssueDescription(content);\n  };\n\n  return (\n    <>\n      <Container component=\"main\" maxWidth=\"xs\">\n        <div style={{ margin: \"20px 5px\" }}>\n          <form noValidate onSubmit={handleFormSubmit}>\n            <Grid container spacing={2}>\n              <Typography className=\"form-label\">Title</Typography>\n              <Grid\n                item\n                xs={12}\n                className=\"custom-form-outline\"\n                style={props.borderClass}\n              >\n                <TextField\n                  name=\"title\"\n                  fullWidth\n                  id=\"issuetitle\"\n                  onChange={handleFormChange}\n                />\n              </Grid>\n\n              <Typography className=\"form-label\">Description</Typography>\n              <Grid\n                item\n                xs={12}\n                style={{\n                  ...props.borderClass,\n                  padding: \"0\",\n                  borderRadius: \"4px\",\n                  margin: \"10px\",\n                }}\n              >\n                {!props.darkTheme ? (\n                  <Editor\n                    value={issueDescription}\n                    init={{\n                      skin: \"material-classic\",\n                      content_css: \"material-classic\",\n                      icons: \"thin\",\n                      height: 250,\n                      menubar: false,\n                      plugins: [\n                        \"advlist autolink lists link image charmap print preview anchor\",\n                        \"searchreplace visualblocks code fullscreen\",\n                        \"insertdatetime media table paste code help wordcount table\",\n                      ],\n                      toolbar: [\n                        \"undo redo | formatselect | bold italic backcolor | \\\n                            alignleft aligncenter alignright alignjustify | \\\n                            bullist numlist outdent indent | removeformat | table | code | help\",\n                      ],\n                    }}\n                    onEditorChange={handleEditorChange}\n                  />\n                ) : (\n                  <Editor\n                    value={issueDescription}\n                    init={{\n                      skin: \"oxide-dark\",\n                      content_css: \"dark\",\n                      icons: \"thin\",\n                      height: 250,\n                      menubar: false,\n                      plugins: [\n                        \"advlist autolink lists link image charmap print preview anchor\",\n                        \"searchreplace visualblocks code fullscreen\",\n                        \"insertdatetime media table paste code help wordcount table\",\n                      ],\n                      toolbar: [\n                        \"undo redo | formatselect | bold italic backcolor | \\\n                            alignleft aligncenter alignright alignjustify | \\\n                            bullist numlist outdent indent | removeformat | table | code | help\",\n                      ],\n                    }}\n                    onEditorChange={handleEditorChange}\n                  />\n                )}\n              </Grid>\n\n              <Typography className=\"form-label\">Image</Typography>\n              <Grid\n                item\n                xs={12}\n                className=\"custom-form-outline\"\n                style={props.borderClass}\n              >\n                <input\n                  type=\"file\"\n                  name=\"image\"\n                  accept=\"image/*\"\n                  onChange={handleImageChange}\n                />\n              </Grid>\n\n              <Typography className=\"form-label\">Tags</Typography>\n              <Grid item xs={12}>\n                <Select\n                  className=\"custom-form-outline-padding-none\"\n                  labelId=\"mutiple-chip-label\"\n                  id=\"mutiple-chip\"\n                  className=\"custom-form-selection-outline\"\n                  style={props.borderClass}\n                  multiple\n                  value={tagsID}\n                  onChange={handleTagsChange}\n                  input={<Input id=\"select-multiple-chip\" />}\n                  renderValue={(selected) => {\n                    let o = {};\n                    tags.map((obj) => {\n                      o[obj.id] = obj.tag_text;\n                    });\n                    return (\n                      <div>\n                        {selected.map((value) => (\n                          <Chip\n                            label={o[value]}\n                            key={value}\n                            style={{ margin: \"5px\", borderRadius: \"10px\" }}\n                          />\n                        ))}\n                      </div>\n                    );\n                  }}\n                >\n                  {tags.map((tag) => (\n                    <MenuItem key={tag.tag_text} value={tag.id}>\n                      <div\n                        style={{\n                          color: tag.color,\n                          fontWeight: \"900\",\n                        }}\n                      >\n                        <span className=\"issue-tag-text\">\n                          {\"#\" + tag.tag_text}\n                        </span>\n                      </div>\n                    </MenuItem>\n                  ))}\n                </Select>\n              </Grid>\n\n              <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                color=\"secondary\"\n                style={{ marginTop: \"20px\" }}\n              >\n                Add Issue\n              </Button>\n            </Grid>\n          </form>\n        </div>\n      </Container>\n    </>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    darkTheme: [\"dark\", \"solarizedDark\", \"palpatine\"].includes(\n      state.theme.theme\n    ),\n    borderClass: [\"dark\", \"solarizedDark\", \"palpatine\"].includes(\n      state.theme.theme\n    )\n      ? {\n          border: \"1px solid #ffffff6e\",\n        }\n      : {\n          border: \"1.5px solid #00000042\",\n        },\n  };\n};\n\nexport default withRouter(connect(mapStateToProps, null)(NewIssueForm));\n"]},"metadata":{},"sourceType":"module"}