{"ast":null,"code":"var _jsxFileName = \"/app/frontend/src/containers/Onlogin.js\";\nimport React, { useState, useEffect } from \"react\";\nimport queryString from \"query-string\";\nimport axios from \"axios\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Button from \"@material-ui/core/Button\";\nimport { connect } from \"react-redux\";\nimport { NavLink, Redirect, Link } from \"react-router-dom\";\nimport { Typography } from \"@material-ui/core\";\nimport * as actions from \"../store/actions/auth\";\nimport * as api_links from \"../APILinks\";\nimport UtilityComponent from \"../components/UtilityComponent\";\nimport HEADER_NAV_TITLES from \"../header_nav_titles\";\n\nfunction Onlogin(props) {\n  const [state, setState] = useState({\n    user_found: false,\n    got_response: false\n  });\n  useEffect(() => {\n    let url = props.location.search;\n    let params = queryString.parse(url);\n    axios({\n      method: \"POST\",\n      url: api_links.API_ROOT + \"users/onlogin/\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      withCredentials: true,\n      data: {\n        code: params.code,\n        state: params.state\n      }\n    }).then(res => {\n      if (res.status === 201 || res.status === 202) {\n        res.data.username && res.data.access_token && setState({\n          user_found: true,\n          got_response: true\n        });\n        props.onAuth(res.data.username, res.data.access_token);\n      } else {\n        console.log(\"Couldn't log in. Either it's an internal error or you have been disabled.\");\n        setState({\n          user_found: false,\n          got_response: true\n        }); // window.location.href = '/signin';\n      }\n    }).catch(err => {\n      console.log(err);\n      setState({\n        user_found: false,\n        got_response: true\n      });\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(UtilityComponent, {\n    not: true,\n    onLogin: true,\n    title: HEADER_NAV_TITLES.ONLOGIN,\n    page: \"ONLOGIN\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }), state.got_response ? state.user_found ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"centered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, setTimeout(() => /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 19\n    }\n  }), 2000)), /*#__PURE__*/React.createElement(\"a\", {\n    href: api_links.RICKROLLED,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./debuggingtime.png\",\n    style: {\n      height: \"300px\",\n      margin: \"40px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }, \"Welcome to Pesticide!\")) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"centered\",\n    style: {\n      justifyContent: \"center\",\n      margin: \"20px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: api_links.RICKROLLED,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./debuggingtime.png\",\n    style: {\n      height: \"300px\",\n      margin: \"40px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Typography, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }, \"Seems like something went wrong... Either its on us, or you've been disabled by an admin.\"), /*#__PURE__*/React.createElement(Link, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btn-filled btn-filled-error\",\n    style: {\n      margin: \"10px\",\n      fontWeight: \"900\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 17\n    }\n  }, \"Trying Again Never Hurts\"))) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"centered\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    href: api_links.RICKROLLED,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"./debuggingtime.png\",\n    style: {\n      height: \"300px\",\n      margin: \"40px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(CircularProgress, {\n    color: \"secondary\",\n    size: 50,\n    style: {\n      marginBottom: \"40px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Typography, {\n    variant: \"h6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, \"Loading...\")));\n}\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onAuth: (username, password) => dispatch(actions.authLogin(username, password))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(Onlogin);","map":{"version":3,"sources":["/app/frontend/src/containers/Onlogin.js"],"names":["React","useState","useEffect","queryString","axios","CircularProgress","Button","connect","NavLink","Redirect","Link","Typography","actions","api_links","UtilityComponent","HEADER_NAV_TITLES","Onlogin","props","state","setState","user_found","got_response","url","location","search","params","parse","method","API_ROOT","headers","withCredentials","data","code","then","res","status","username","access_token","onAuth","console","log","catch","err","ONLOGIN","display","setTimeout","RICKROLLED","height","margin","justifyContent","fontWeight","marginBottom","mapDispatchToProps","dispatch","password","authLogin"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport queryString from \"query-string\";\nimport axios from \"axios\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Button from \"@material-ui/core/Button\";\nimport { connect } from \"react-redux\";\nimport { NavLink, Redirect, Link } from \"react-router-dom\";\nimport { Typography } from \"@material-ui/core\";\nimport * as actions from \"../store/actions/auth\";\nimport * as api_links from \"../APILinks\";\nimport UtilityComponent from \"../components/UtilityComponent\";\nimport HEADER_NAV_TITLES from \"../header_nav_titles\";\n\nfunction Onlogin(props) {\n  const [state, setState] = useState({\n    user_found: false,\n    got_response: false,\n  });\n\n  useEffect(() => {\n    let url = props.location.search;\n    let params = queryString.parse(url);\n\n    axios({\n      method: \"POST\",\n      url: api_links.API_ROOT + \"users/onlogin/\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      withCredentials: true,\n      data: {\n        code: params.code,\n        state: params.state,\n      },\n    })\n      .then((res) => {\n        if (res.status === 201 || res.status === 202) {\n          res.data.username &&\n            res.data.access_token &&\n            setState({\n              user_found: true,\n              got_response: true,\n            });\n          props.onAuth(res.data.username, res.data.access_token);\n        } else {\n          console.log(\n            \"Couldn't log in. Either it's an internal error or you have been disabled.\"\n          );\n          setState({\n            user_found: false,\n            got_response: true,\n          });\n          // window.location.href = '/signin';\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n        setState({\n          user_found: false,\n          got_response: true,\n        });\n      });\n  }, []);\n\n  return (\n    <>\n      <UtilityComponent not onLogin title={HEADER_NAV_TITLES.ONLOGIN} page=\"ONLOGIN\" />\n      {state.got_response ? (\n        state.user_found ? (\n          <div className=\"centered\">\n            <div style={{ display: \"none\" }}>\n              {setTimeout(\n                () => (\n                  <Redirect to=\"/\" />\n                ),\n                2000\n              )}\n            </div>\n            <a href={api_links.RICKROLLED}>\n              <img\n                src=\"./debuggingtime.png\"\n                style={{ height: \"300px\", margin: \"40px\" }}\n              />\n            </a>\n            <Typography variant=\"h6\">Welcome to Pesticide!</Typography>\n          </div>\n        ) : (\n            <div\n              className=\"centered\"\n              style={{ justifyContent: \"center\", margin: \"20px\" }}\n            >\n              <a href={api_links.RICKROLLED}>\n                <img\n                  src=\"./debuggingtime.png\"\n                  style={{ height: \"300px\", margin: \"40px\" }}\n                />\n              </a>\n\n              <Typography>\n                Seems like something went wrong... Either its on us, or you've\n                been disabled by an admin.\n            </Typography>\n              <Link to=\"/signin\">\n                <Button\n                  className=\"btn-filled btn-filled-error\"\n                  style={{ margin: \"10px\", fontWeight: \"900\" }}\n                >\n                  Trying Again Never Hurts\n              </Button>\n              </Link>\n            </div>\n          )\n      ) : (\n          <div className=\"centered\">\n            <a href={api_links.RICKROLLED}>\n              <img\n                src=\"./debuggingtime.png\"\n                style={{ height: \"300px\", margin: \"40px\" }}\n              />\n            </a>\n            <CircularProgress\n              color=\"secondary\"\n              size={50}\n              style={{ marginBottom: \"40px\" }}\n            />\n            <Typography variant=\"h6\">Loading...</Typography>\n          </div>\n        )}\n    </>\n  );\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    onAuth: (username, password) =>\n      dispatch(actions.authLogin(username, password)),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(Onlogin);\n"]},"metadata":{},"sourceType":"module"}