{"ast":null,"code":"var _jsxFileName = \"/app/frontend/src/components/UtilityComponent.js\";\nimport React from \"react\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { withRouter, Redirect } from \"react-router-dom\";\nimport { API_ROOT } from \"../APILinks\";\nimport BACK_BUTTONS from \"../../src/backButton\";\nimport * as headerActions from \"../store/actions/header\";\nimport * as themeActions from \"../store/actions/theme\";\n\nconst UtilityComponent = props => {\n  const [user, setUser] = React.useState({\n    status: \"\"\n  });\n  React.useEffect(() => {\n    const docTitle = props.title == \"Pesticide\" ? \"Pesticide\" : \"Pesticide | \" + props.title;\n    document.title = docTitle;\n    let token = localStorage.getItem(\"token\") || \"\";\n    axios.defaults.headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Token \" + token\n    };\n    axios.get(API_ROOT + \"user_logged_in/\").then(res => {\n      setUser({\n        status: \"LOGGED_IN\",\n        is_master: res.data[0].is_master\n      });\n    }).catch(err => {\n      console.log(err);\n      setUser({\n        status: \"NOT_LOGGED_IN\"\n      });\n    });\n  }, [props]);\n  React.useEffect(() => {\n    props.changeHeaderTitle(props.title);\n    props.changeBackButton(BACK_BUTTONS[props.page].showBack, BACK_BUTTONS[props.page].backText, BACK_BUTTONS[props.page].backLink);\n    [\"HOME\", \"PROJECTS\", \"ISSUES\"].includes(props.page) ? props.changeBottomNav(props.page) : props.changeBottomNav(\"\");\n    !props.customRenderScroll && document.getElementById(\"main-main\").scrollTo(0, 0);\n  }, [props.title]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, props.not && user.status === \"LOGGED_IN\" && /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 52\n    }\n  }), props.onlyAdmins && user.status === \"LOGGED_IN\" && user.is_master === false && /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 37\n    }\n  }), !props.onLogin && user.status === \"NOT_LOGGED_IN\" && /*#__PURE__*/React.createElement(Redirect, {\n    to: \"/signin\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }));\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    changeHeaderTitle: title => dispatch(headerActions.changeTitle(title)),\n    changeBackButton: (showBack, backText, backLink) => dispatch(themeActions.changeBackButton(showBack, backText, backLink)),\n    changeBottomNav: bottomNav => dispatch(themeActions.changeBottomNav(bottomNav))\n  };\n};\n\nexport default withRouter(connect(null, mapDispatchToProps)(UtilityComponent));","map":{"version":3,"sources":["/app/frontend/src/components/UtilityComponent.js"],"names":["React","axios","connect","withRouter","Redirect","API_ROOT","BACK_BUTTONS","headerActions","themeActions","UtilityComponent","props","user","setUser","useState","status","useEffect","docTitle","title","document","token","localStorage","getItem","defaults","headers","Authorization","get","then","res","is_master","data","catch","err","console","log","changeHeaderTitle","changeBackButton","page","showBack","backText","backLink","includes","changeBottomNav","customRenderScroll","getElementById","scrollTo","display","not","onlyAdmins","onLogin","mapDispatchToProps","dispatch","changeTitle","bottomNav"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport axios from \"axios\";\nimport { connect } from \"react-redux\";\nimport { withRouter, Redirect } from \"react-router-dom\";\nimport { API_ROOT } from \"../APILinks\";\nimport BACK_BUTTONS from \"../../src/backButton\";\nimport * as headerActions from \"../store/actions/header\";\nimport * as themeActions from \"../store/actions/theme\";\n\nconst UtilityComponent = (props) => {\n  const [user, setUser] = React.useState({\n    status: \"\",\n  });\n  React.useEffect(() => {\n    const docTitle =\n      props.title == \"Pesticide\" ? \"Pesticide\" : \"Pesticide | \" + props.title;\n    document.title = docTitle;\n    let token = localStorage.getItem(\"token\") || \"\";\n    axios.defaults.headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Token \" + token,\n    };\n    axios\n      .get(API_ROOT + \"user_logged_in/\")\n      .then((res) => {\n        setUser({\n          status: \"LOGGED_IN\",\n          is_master: res.data[0].is_master,\n        });\n      })\n      .catch((err) => {\n        console.log(err);\n        setUser({ status: \"NOT_LOGGED_IN\" });\n      });\n  }, [props]);\n  React.useEffect(() => {\n    props.changeHeaderTitle(props.title);\n    props.changeBackButton(\n      BACK_BUTTONS[props.page].showBack,\n      BACK_BUTTONS[props.page].backText,\n      BACK_BUTTONS[props.page].backLink\n    );\n    [\"HOME\", \"PROJECTS\", \"ISSUES\"].includes(props.page)\n      ? props.changeBottomNav(props.page)\n      : props.changeBottomNav(\"\");\n    !props.customRenderScroll && document.getElementById(\"main-main\").scrollTo(0, 0);\n  }, [props.title]);\n  return (\n    <div style={{ display: \"none\" }}>\n      {props.not && user.status === \"LOGGED_IN\" && <Redirect to=\"/\" />}\n      {props.onlyAdmins &&\n        user.status === \"LOGGED_IN\" &&\n        user.is_master === false && <Redirect to=\"/\" />}\n      {!props.onLogin && user.status === \"NOT_LOGGED_IN\" && (\n        <Redirect to=\"/signin\" />\n      )}\n    </div>\n  );\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    changeHeaderTitle: (title) => dispatch(headerActions.changeTitle(title)),\n    changeBackButton: (\n      showBack,\n      backText,\n      backLink\n    ) => dispatch(themeActions.changeBackButton(\n      showBack,\n      backText,\n      backLink\n    )),\n    changeBottomNav: (bottomNav) => dispatch(themeActions.changeBottomNav(bottomNav))\n  };\n};\n\nexport default withRouter(connect(null, mapDispatchToProps)(UtilityComponent));\n"]},"metadata":{},"sourceType":"module"}